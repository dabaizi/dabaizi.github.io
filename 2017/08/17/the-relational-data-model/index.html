<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="博观约取 厚积薄发 知人者智 自知者明；胜人者力 自胜者强"><title>【DataBase System】关系数据模型 | 博观约取 厚积薄发</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">【DataBase System】关系数据模型</h1><a id="logo" href="/.">博观约取 厚积薄发</a><p class="description">知人者智 自知者明；胜人者力 自胜者强</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">【DataBase System】关系数据模型</h1><div class="post-meta">Aug 17, 2017</div><div class="post-content"><p>In general, a row in a table represents a relationship among a set of values.A tuple is simply a sequence (or list) of values. A relationship between n values is represented mathematically by an n-tuple of values,<br><a id="more"></a></p>
<h2 id="1-The-ralational-data-model"><a href="#1-The-ralational-data-model" class="headerlink" title="1. The ralational data model"></a>1. The ralational data model</h2><p>In general, a row in a table represents a relationship among a set of values.<br>A tuple is simply a sequence (or list) of values. A relationship between n values is represented mathematically by an n-tuple of values,</p>
<p>In the relational model the term relation is used to refer to a table, while<br>the term tuple is used to refer to a row. Similarly, the term attribute refers to a column of a table.</p>
<p>For each attribute of a relation, there is a set of permitted values, called the domain of that attribute.A domain is atomic if elements of the domain are considered to be indivisible units.</p>
<p>When we talk about a database, we must differentiate between the database schema, which is the logical design of the database, and the database instance, which is a snapshot of the data in the database at a given instant in time. A relation schema consists of a list of attributes and their corresponding domains.</p>
<p>A superkey is a set of one or more attributes that, taken collectively, allow us to identify uniquely a tuple in the relation.</p>
<p>Such minimal superkeys are called candidate keys。</p>
<p>We shall use the term primary key to denote a candidate key that is chosen<br>by the database designer as the principal means of identifying tuples within a<br>relation.</p>
<h3 id="compare"><a href="#compare" class="headerlink" title="compare"></a>compare</h3><p>The char data type stores fixed length strings. Consider, for example, an<br>attribute A of type char(10). If we store a string “Avi” in this attribute, 7 spaces are appended to the string to make it 10 characters long. In contrast, if attribute B were of type varchar(10), and we store “Avi” in attribute B, no spaces would be added. When comparing two values of type char, if they are of different lengths extra spaces are automatically added to the shorter one to make them the same size, before comparison.</p>
<p>When comparing a char type with a varchar type, one may expect extra spaces to be added to the varchar type to make the lengths equal, before comparison; however, this may or may not be done, depending on the database system. As a result, even if the same value “Avi” is stored in the attributes A and B above, a comparison A=B may return false. We recommend you always use the varchar type instead of the char type to avoid these problems.</p>
<h3 id="delete-and-drop"><a href="#delete-and-drop" class="headerlink" title="delete and drop"></a>delete and drop</h3><p>To remove a relation from an SQL database, we use the drop table command. The drop table command deletes all information about the dropped relation from the database. The command</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">drop</span> <span class="keyword">table</span> r;</div></pre></td></tr></table></figure>
<p>is a more drastic action than</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">delete</span> <span class="keyword">from</span> r;</div></pre></td></tr></table></figure>
<p>The latter retains relation r, but deletes all tuples in r. The former deletes not only all tuples of r, but also the schema for r. After r is dropped, no tuples can be inserted into r unless it is re-created with the create table command.</p>
<h3 id="alter"><a href="#alter" class="headerlink" title="alter"></a>alter</h3><p>We use the alter table command to add attributes to an existing relation. All tuples in the relation are assigned null as the value for the new attribute. The form of the alter table command is</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">alter</span> <span class="keyword">table</span> r <span class="keyword">add</span> AD;</div></pre></td></tr></table></figure>
<p>where r is the name of an existing relation, A is the name of the attribute to be added, and D is the type of the added attribute. We can drop attributes from a relation by the command</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">alter</span> <span class="keyword">table</span> r <span class="keyword">drop</span> A;</div></pre></td></tr></table></figure>
<p>where r is the name of an existing relation, and A is the name of an attribute of the relation. Many database systems do not support dropping of attributes, although they will allow an entire table to be dropped.</p>
<h2 id="2-SQL"><a href="#2-SQL" class="headerlink" title="2. SQL"></a>2. SQL</h2><h3 id="select"><a href="#select" class="headerlink" title="select"></a>select</h3><p>The select clause may also contain arithmetic expressions involving the operators +, −, ∗, and / operating on constants or attributes of tuples.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> <span class="keyword">name</span>, course <span class="keyword">id</span></div><div class="line"><span class="keyword">from</span> instructor, teaches</div><div class="line"><span class="keyword">where</span> instructor.ID= teaches.ID;</div></pre></td></tr></table></figure>
<p>Note that the above query outputs only instructors who have taught some course. Instructors who have not taught any course are not output; if we wish to output such tuples,we could use an operation called the outer join.</p>
<h4 id="example1"><a href="#example1" class="headerlink" title="example1"></a>example1</h4><p>Suppose that we want to write the query “Find the names of all instructors whose salary is greater than at least one instructor in the Biology department.”We can write the SQL expression:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> T.name</div><div class="line"><span class="keyword">from</span> instructor <span class="keyword">as</span> T, instructor <span class="keyword">as</span> S</div><div class="line"><span class="keyword">where</span> T.salary &gt; S.salary <span class="keyword">and</span> S.dept <span class="keyword">name</span> = ’Biology’;</div></pre></td></tr></table></figure>
<p>Observe that we could not use the notation instructor.salary, since it would not be clear which reference to instructor is intended.</p>
<h3 id="String-Operations"><a href="#String-Operations" class="headerlink" title="String Operations"></a>String Operations</h3><p>SQL specifies strings by enclosing them in single quotes, for example, ’Computer’.Asingle quote character that is part of a string can be specified by using two single quote characters; for example, the string “It’s right” can be specified by “It”s right”.</p>
<p>The SQL standard specifies that the equality operation on strings is case sensitive;However, some database systems, such as MySQL and SQL Server, do not distinguish uppercase from lowercase when matching strings;This default behavior can, however, be changed, either at the database level or at the level of specific attributes.</p>
<h4 id="Pattern-matching"><a href="#Pattern-matching" class="headerlink" title="Pattern matching"></a>Pattern matching</h4><pre><code>Percent (%): The % character matches any substring.
Underscore (_): The character matches any character
</code></pre><p>Patterns are case sensitive; that is, uppercase characters do not match lowercase characters, or vice versa.</p>
<p>For patterns to include the special pattern characters (that is,%and ), SQL allows the specification of an escape character. The escape character is used immediately before a special pattern character to indicate that the special pattern character is to be treated like a normal character. We define the escape character for a like comparison using the escape keyword. To illustrate, consider the following patterns, which use a backslash (\) as the escape character:</p>
<pre><code>like ’ab\%cd%’ escape ’\’ matches all strings beginning with “ab%cd”.
like ’ab\\cd%’ escape ’\’ matches all strings beginning with “ab\cd”.
</code></pre><h3 id="union"><a href="#union" class="headerlink" title="union"></a>union</h3><p>The union operation automatically eliminates duplicates, unlike the select clause.If we want to retain all duplicates, we must write union all in place of union</p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">(select course id</div><div class="line"><span class="keyword">from</span> section</div><div class="line"><span class="keyword">where</span> semester = ’Fall’ and year= <span class="number">2009</span>)</div><div class="line">union</div><div class="line">(select course id</div><div class="line"><span class="keyword">from</span> section</div><div class="line"><span class="keyword">where</span> semester = ’Spring’ and year= <span class="number">2010</span>);</div><div class="line">###########################################</div><div class="line">(select course id</div><div class="line"><span class="keyword">from</span> section</div><div class="line"><span class="keyword">where</span> semester = ’Fall’ and year= <span class="number">2009</span>)</div><div class="line">union all</div><div class="line">(select course id</div><div class="line"><span class="keyword">from</span> section</div><div class="line"><span class="keyword">where</span> semester = ’Spring’ and year= <span class="number">2010</span>);</div></pre></td></tr></table></figure>
<h3 id="intersect"><a href="#intersect" class="headerlink" title="intersect"></a>intersect</h3><p>The intersect operation automatically eliminates duplicates. If we want to retain all duplicates, we must write intersect all in place of intersect.</p>
<h3 id="except"><a href="#except" class="headerlink" title="except"></a>except</h3><p>The except operation automatically eliminates duplicates. If we want to retain all duplicates, we must write except all in place of except.</p>
<h3 id="Null-Values"><a href="#Null-Values" class="headerlink" title="Null Values"></a>Null Values</h3><p>Null values present special problems in relational operations, including arithmetic operations, comparison operations, and set operations. The result of an arithmetic expression (involving, for example +, −, ∗, or /) is null if any of the input values is null.</p>
<p>SQL therefore treats as unknown the result of any comparison involving a null value.Since the predicate in a where clause can involve Boolean operations such as and, or, and not on the results of comparisons, the definitions of the Boolean operations are extended to deal with the value unknown.</p>
<pre><code>and: The result of true and unknown is unknown, false and unknown is false,while unknown and unknown is unknown.
or: The result of true or unknown is true, false or unknown is unknown, while unknown or unknown is unknown.
not: The result of not unknown is unknown.
</code></pre><p>Some implementations of SQL also allow us to testwhether the result of a comparison is unknown, rather than true or false, by using the clauses is unknown and is not unknown.</p>
<pre><code>ps : a comparison “null=null” would return unknown,rather than true
</code></pre><h3 id="group-by-amp-having"><a href="#group-by-amp-having" class="headerlink" title="group by &amp; having"></a>group by &amp; having</h3><p>The meaning of a query containing aggregation, group by, or having clauses is defined by the following sequence of operations:</p>
<pre><code>1. As was the case for queries without aggregation, the from clause is first evaluated to get a relation.
2. If a where clause is present, the predicate in the where clause is applied on the result relation of the from clause.
3. Tuples satisfying the where predicate are then placed into groups by the group by clause if it is present. If the group by clause is absent, the entire set of tuples satisfying the where predicate is treated as being in one group.
4. The having clause, if it is present, is applied to each group; the groups that do not satisfy the having clause predicate are removed.
5. The select clause uses the remaining groups to generate tuples of the result of the query, applying the aggregate functions to get a single result tuple for each group.
</code></pre></div><div class="tags"><a href="/tags/DateBase/">DateBase</a><a href="/tags/SQL/">SQL</a></div><div class="post-nav"><a href="/2016/09/18/learn-algorithm-6/" class="next">【渣渣学算法6】Font Size</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://dabaizi.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/C/" style="font-size: 15px;">C++</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/DateBase/" style="font-size: 15px;">DateBase</a> <a href="/tags/SQL/" style="font-size: 15px;">SQL</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/08/17/the-relational-data-model/">【DataBase System】关系数据模型</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/18/learn-algorithm-6/">【渣渣学算法6】Font Size</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/17/learn-algorithm-5/">【渣渣学算法5】Hangover</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/12/learn-algorithm-4/">【渣渣学算法4】487-3279</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/11/learn-algorithm-3/">【渣渣学算法3】Exponentiation</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/10/learn-algorithm-2/">【渣渣学算法2】最长回文子串</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/07/learn-algorithm-1/">【渣渣学算法1】之传话游戏</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/30/cplusplus-foundation-7/">【C++基础】矩阵模板类</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/29/cplusplus-foundation-6/">【C++基础】虚函数与继承</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/27/cplusplus-foundation-5/">【C++基础】const相关</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.aligugu.net/" title="阿里姑姑" target="_blank">阿里姑姑</a><ul></ul><a href="http://www.uxhr.com/" title="优秀hr" target="_blank">优秀hr</a><ul></ul><a href="http://www.example3.com/" title="米表" target="_blank">米表</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2017 <a href="/." rel="nofollow">博观约取 厚积薄发.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>